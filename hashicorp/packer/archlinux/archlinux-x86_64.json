{
    "variables" : {
        "iso_url" : "archlinux-2017.03.01-dual.iso",
        "iso_sum" : "1d25235e7cebe45f93452fbc05a0fb66",
        "iso_sum_type" : "md5",
        "http_proxy": "{{ env `http_proxy`}}",
        "https_proxy": "{{ env `https_proxy`}}",
        "HTTP_PROXY": "{{ env `HTTP_PROXY`}}",
        "HTTPS_PROXY": "{{ env `HTTPS_PROXY`}}",
        "debug": "false",
        "memory": "1024",
        "disk_size": "10240",
        "timeout": "300"
    },
    "builders" : [ {
        "type" : "virtualbox-iso",
        "guest_os_type" : "ArchLinux_64",
        "iso_url" : "{{user `iso_url`}}",
        "iso_checksum" : "{{user `iso_sum`}}",
        "iso_checksum_type" : "{{user `iso_sum_type`}}",
        "guest_additions_mode" : "disable",
        "vboxmanage": [
            ["modifyvm", "{{.Name}}", "--memory", "{{user `memory`}}"]
        ],
        "disk_size" : "{{user `disk_size`}}",
        "http_directory": "./scripts",
        "boot_wait" : "10s",
        "boot_command" : [
            "<enter><wait10><wait10><wait5>",
            "passwd<enter>root<enter>root<enter>",
            "export http_proxy={{ user `http_proxy`}}<enter>",
            "export https_proxy={{ user `https_proxy`}}<enter>",
            "export HTTP_PROXY={{ user `HTTP_PROXY`}}<enter>",
            "export HTTPS_PROXY={{ user `HTTPS_PROXY`}}<enter>",
            "export no_proxy={{ .HTTPIP }}<enter>",
            "export NO_PROXY={{ .HTTPIP }}<enter>",
            "curl http://{{ .HTTPIP }}:{{ .HTTPPort }}/pacstrap.sh | sh | tee log.txt && reboot <enter>"
        ],
        "ssh_username" : "vagrant",
        "ssh_password" : "vagrant",
        "ssh_wait_timeout" : "{{user `timeout`}}s",
        "shutdown_command" : "systemctl poweroff",
        "keep_registered": "{{user `debug`}}"
    } ],
    "provisioners" : [  ],
    "post-processors" : [ {
        "type" : "vagrant",
        "output" : "archlinux-x86_64.box"
    } ]
}
